{"version":3,"sources":["firebase.js","contexts/AuthContext.js","components/Chats.jsx","components/Login.jsx","components/App.js","index.js"],"names":["console","log","process","auth","firebase","initializeApp","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","AuthContext","React","createContext","AuthProvider","children","useState","loading","setLoading","user","setUser","history","useHistory","useEffect","onAuthStateChanged","push","value","Provider","Chats","useContext","handleLogout","a","signOut","getFile","url","fetch","response","blob","data","File","type","axios","get","headers","REACT_APP_CHAT_ENGINE_ID","email","uid","then","catch","formData","FormData","append","displayName","photoURL","avatar","name","post","error","message","className","onClick","height","projectID","userName","userSecret","Login","id","style","color","signInWithRedirect","GoogleAuthProvider","GoogleOutlined","App","fontFamily","path","component","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.daaf258d.chunk.js","sourcesContent":["import firebase from 'firebase/app'\r\nimport \"firebase/auth\"\r\n\r\nconsole.log(process.env)\r\n\r\nexport const auth=firebase.initializeApp( {\r\n  apiKey: process.env.REACT_APP_FIREBASE_API_KEY,\r\n  authDomain: process.env.REACT_APP_FIREBASE_AUTH_DOMAIN,\r\n  projectId: process.env.REACT_APP_FIREBASE_PROJECT_ID,\r\n  storageBucket: process.env.REACT_APP_FIREBASE_STORAGE_BUCKET,\r\n  messagingSenderId: process.env.REACT_APP_FIREBASE_MESSAGING_SENDER_ID,\r\n  appId: process.env.REACT_APP_FIREBASE_APP_ID\r\n}).auth();\r\n\r\n","import React, { useContext, useState, useEffect } from \"react\"\r\n\r\nimport { useHistory } from \"react-router-dom\"\r\n\r\nimport { auth } from \"../firebase\"\r\n\r\nconst AuthContext = React.createContext()\r\n\r\nexport function useAuth() { return useContext(AuthContext) }\r\n\r\nexport function AuthProvider({ children }) {\r\n  const [loading, setLoading] = useState(true)\r\n  const [user, setUser] = useState()\r\n  const history = useHistory()\r\n\r\n  useEffect(() => {\r\n    auth.onAuthStateChanged(user => {\r\n      setUser(user)\r\n      setLoading(false)\r\n      history.push('/chats')\r\n    })\r\n  }, [user, history])\r\n\r\n  const value = { user }\r\n\r\n  return (\r\n    <AuthContext.Provider value={value}>\r\n      {!loading && children}\r\n    </AuthContext.Provider>\r\n  )\r\n}","import React,{useState,useEffect} from 'react';\r\nimport { useHistory } from 'react-router';\r\nimport {ChatEngine} from 'react-chat-engine'\r\nimport {auth} from '../firebase'\r\n\r\nimport {useAuth} from '../contexts/AuthContext'\r\nimport axios from 'axios';\r\n\r\nconst Chats = () => {\r\n  const history=useHistory()\r\n  const {user}=useAuth()\r\n  const [loading, setLoading] = useState(true)\r\n\r\n  const handleLogout=async()=>{\r\n    await auth.signOut()\r\n    history.push('/')\r\n  }\r\n  const getFile=async(url)=>{\r\n  const response=await fetch(url)\r\n  const data=await response.blob();\r\n  return new File([data],\"userPhoto.jpg\",{type:'image/jpeg'})\r\n  }\r\n\r\n  useEffect(()=>{\r\n  if(!user){\r\n    history.push('/')\r\n    return\r\n  }\r\n  axios.get('https://api.chatengine.io/users/me/',{\r\n    headers:{\r\n      \"project-id\":process.env.REACT_APP_CHAT_ENGINE_ID,\r\n      \"user-name\":user.email,\r\n      \"user-secret\":user.uid\r\n    }\r\n  })\r\n    .then(()=>{\r\n    setLoading(false)\r\n  })\r\n  .catch(()=>{ \r\n    let formData=new FormData();\r\n  formData.append('email',user.email)\r\nformData.append('username',user.displayName)\r\nformData.append('secret',user.uid)\r\n\r\ngetFile(user.photoURL)\r\n.then((avatar)=>{\r\n  formData.append('avatar',avatar,avatar.name)\r\n  axios.post(\"https://api.chatengine.io/users/\",\r\n  formData,\r\n  {headers:{\"private-key\":process.env.REACT_APP_CHAT_ENGINE_PRIVATE_KEY}})\r\n})\r\n.then(()=>setLoading(false))\r\n.catch((error)=>console.log(error.message))\r\n}\r\n  )\r\n\r\n  },[user,history])\r\n  if(!user||loading) return 'Loading...'\r\n\r\n  return (\r\n    <div className=\"chats-page\">\r\n      <div className=\"nav-bar\">\r\n        <div className=\"logo-tab\">MyChat</div>\r\n        <div className=\"logout-tab\" onClick={handleLogout}>Logout</div>\r\n      </div>\r\n      <ChatEngine \r\n      height=\"calc(100vh - 66px)\"\r\n      projectID={process.env.REACT_APP_CHAT_ENGINE_KEY}\r\n      userName={user.email}\r\n      userSecret={user.uid}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Chats;","import React from \"react\";\r\nimport { GoogleOutlined} from \"@ant-design/icons\";\r\n\r\nimport {auth} from '../firebase'\r\nimport firebase from \"firebase/app\";\r\n\r\nconst Login = () => {\r\n  return (\r\n    <div id=\"login-page\">\r\n      <div id=\"login-card\">\r\n        <h2>\r\n          Welcome to <span style={{ color: \"#4285f4\" }}>My</span>\r\n          <span style={{ color: \"#3b5998\" }}>Chat</span>\r\n        </h2>\r\n        <div \r\n        className=\"login-button google\"\r\n        onClick={()=>auth.signInWithRedirect(new firebase.auth.GoogleAuthProvider())}>\r\n          <GoogleOutlined />\r\n          Sign In with Google\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Login;\r\n","import React from \"react\"\r\n\r\nimport { BrowserRouter as Router, Switch, Route } from \"react-router-dom\"\r\n\r\nimport { AuthProvider } from \"../contexts/AuthContext\"\r\n\r\nimport Chats from \"./Chats\"\r\nimport Login from \"./Login\"\r\n\r\nfunction App() {\r\n  return (\r\n    <div style={{ fontFamily: 'Avenir' }}>\r\n      <Router>\r\n        <AuthProvider>\r\n          <Switch>\r\n            <Route path=\"/chats\" component={Chats} />\r\n            <Route path=\"/\" component={Login} />\r\n          </Switch>\r\n        </AuthProvider>\r\n      </Router>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default App\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './components/App';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n"],"sourceRoot":""}